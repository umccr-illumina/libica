<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>libica.app.gds API documentation</title>
<meta name="description" content="gds module …">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>libica.app.gds</code></h1>
</header>
<section id="section-intro">
<p>gds module</p>
<p>ImplNote:
Consider implementation here should be reusable application specific routines for GDS common use cases.
Consider not to re-do libgds SDK generality.</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="libica.app.gds.check_file"><code class="name flex">
<span>def <span class="ident">check_file</span></span>(<span>gds_path) ‑> list</span>
</code></dt>
<dd>
<div class="desc"><p>See check_path</p>
<p>NOTE: This is for "error checking" use case, hence, it may raise FileNotFoundError</p>
<p>:param gds_path:
:return:</p></div>
</dd>
<dt id="libica.app.gds.check_path"><code class="name flex">
<span>def <span class="ident">check_path</span></span>(<span>volume_name: str, path: str) ‑> list</span>
</code></dt>
<dd>
<div class="desc"><p>Use cases
This behave like UNIX <code>ls</code> command whereas you can check an absolute path to file or a directory.
You can use it to check whether a file exist in GDS because it raises FileNotFoundError.
Otherwise, it return file(s) found.</p>
<p>NOTE: This wrap get_file_list but more strict to raise FileNotFoundError if zero match.</p>
<p>:param volume_name:
:param path:
:return: List of libgds.FileResponse objects
:rtype: list[FileResponse]</p></div>
</dd>
<dt id="libica.app.gds.download_gds_file"><code class="name flex">
<span>def <span class="ident">download_gds_file</span></span>(<span>volume_name: str, path: str) ‑> (<function NamedTemporaryFile at 0x106a57880>, None)</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieve <em>single</em> GDS file</p>
<p>It collects matching path (expect single file) through get_file_list.
Hence, there should only be one item in the list.
Then, we use the requests library to download the gds file from presigned URL to temporary storage.
The downloaded file is back by NamedTemporaryFile and, therefore will be deleted once it goes 'out of scope'.</p>
<p>NOTE:
It is caller responsibility to provide an absolute path to a file for the path parameter.
If multiple files are found, it warns and return None.</p>
<p>It is recommend to close NamedTemporaryFile after use.
For example, work within closing context manager like so.
with closing(ntf) as f:
with open(f.name, newline='') as csv_file:
csv_reader = csv.reader(csv_file, delimiter=',')
&hellip;
&hellip;</p>
<p>:param volume_name:
:param path: the GDS path of the file to download
:return NamedTemporaryFile: or None if file is not found or multiple files are found</p></div>
</dd>
<dt id="libica.app.gds.get_file_cred"><code class="name flex">
<span>def <span class="ident">get_file_cred</span></span>(<span>file_id: str) ‑> (<class 'bool'>, <class '<a title="libica.openapi.libgds.models.aws_s3_temporary_upload_credentials.AwsS3TemporaryUploadCredentials" href="../openapi/libgds/models/aws_s3_temporary_upload_credentials.html#libica.openapi.libgds.models.aws_s3_temporary_upload_credentials.AwsS3TemporaryUploadCredentials">AwsS3TemporaryUploadCredentials</a>'>)</span>
</code></dt>
<dd>
<div class="desc"><p>Return underlay S3 object store credential details for given GDS File ID with r+w</p></div>
</dd>
<dt id="libica.app.gds.get_file_list"><code class="name flex">
<span>def <span class="ident">get_file_list</span></span>(<span>volume_name: str, path: str = '/*') ‑> list</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="libica.app.gds.get_files_from_gds_by_suffix"><code class="name flex">
<span>def <span class="ident">get_files_from_gds_by_suffix</span></span>(<span>location: str, file_suffix: str) ‑> List[str]</span>
</code></dt>
<dd>
<div class="desc"><p>Use case:
For given gds://vol/path/to/folder find file end with extension defined in file_suffix e.g. '.bam'
Collect all found and return a list ['gds://location/1.bam', &hellip;]</p></div>
</dd>
<dt id="libica.app.gds.get_files_list"><code class="name flex">
<span>def <span class="ident">get_files_list</span></span>(<span>volume_name: str, paths=None) ‑> list</span>
</code></dt>
<dd>
<div class="desc"><p>Use cases
Get file listing for given volume_name and paths.
If path are not specified, it will return listing of all files under given volume_name.
Listing is recursive in nature for a volume or folder path.
You can still specify an absolute path for a file.
PreSignedUrl is always included.</p>
<p>:param volume_name:
:param paths: default list all
:return: List of libgds.FileResponse objects
:rtype: list[FileResponse]</p></div>
</dd>
<dt id="libica.app.gds.get_folder_cred"><code class="name flex">
<span>def <span class="ident">get_folder_cred</span></span>(<span>folder_id: str) ‑> (<class 'bool'>, <class '<a title="libica.openapi.libgds.models.aws_s3_temporary_upload_credentials.AwsS3TemporaryUploadCredentials" href="../openapi/libgds/models/aws_s3_temporary_upload_credentials.html#libica.openapi.libgds.models.aws_s3_temporary_upload_credentials.AwsS3TemporaryUploadCredentials">AwsS3TemporaryUploadCredentials</a>'>)</span>
</code></dt>
<dd>
<div class="desc"><p>Return underlay S3 object store credential details for given GDS Folder ID with r+w</p></div>
</dd>
<dt id="libica.app.gds.get_gds_file_to_bytes"><code class="name flex">
<span>def <span class="ident">get_gds_file_to_bytes</span></span>(<span>gds_volume_name: str, gds_path: str) ‑> bytes</span>
</code></dt>
<dd>
<div class="desc"><p>get_object_to_bytes API, with on-the-fly gzip detection and decompression</p>
<p>:param gds_volume_name:
:param gds_path:
:return bytes: bytes from the decompressed GDS File body</p></div>
</dd>
<dt id="libica.app.gds.get_gds_uri"><code class="name flex">
<span>def <span class="ident">get_gds_uri</span></span>(<span>gds_volume_name, gds_path)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="libica.app.gds.parse_path"><code class="name flex">
<span>def <span class="ident">parse_path</span></span>(<span>gds_path)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="libica.app.gds.presign_gds_file"><code class="name flex">
<span>def <span class="ident">presign_gds_file</span></span>(<span>file_id: str, volume_name: str, path_: str, presigned_url_mode: str = 'Attachment') ‑> (<class 'bool'>, <class 'str'>)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="libica.app.gds.presign_gds_file_with_override"><code class="name flex">
<span>def <span class="ident">presign_gds_file_with_override</span></span>(<span>file_id: str, **kwargs) ‑> (<class 'bool'>, <class 'str'>)</span>
</code></dt>
<dd>
<div class="desc"><p>Default override option for response_content_type is text/html and response_content_disposition is inline</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="libica.app" href="index.html">libica.app</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="libica.app.gds.check_file" href="#libica.app.gds.check_file">check_file</a></code></li>
<li><code><a title="libica.app.gds.check_path" href="#libica.app.gds.check_path">check_path</a></code></li>
<li><code><a title="libica.app.gds.download_gds_file" href="#libica.app.gds.download_gds_file">download_gds_file</a></code></li>
<li><code><a title="libica.app.gds.get_file_cred" href="#libica.app.gds.get_file_cred">get_file_cred</a></code></li>
<li><code><a title="libica.app.gds.get_file_list" href="#libica.app.gds.get_file_list">get_file_list</a></code></li>
<li><code><a title="libica.app.gds.get_files_from_gds_by_suffix" href="#libica.app.gds.get_files_from_gds_by_suffix">get_files_from_gds_by_suffix</a></code></li>
<li><code><a title="libica.app.gds.get_files_list" href="#libica.app.gds.get_files_list">get_files_list</a></code></li>
<li><code><a title="libica.app.gds.get_folder_cred" href="#libica.app.gds.get_folder_cred">get_folder_cred</a></code></li>
<li><code><a title="libica.app.gds.get_gds_file_to_bytes" href="#libica.app.gds.get_gds_file_to_bytes">get_gds_file_to_bytes</a></code></li>
<li><code><a title="libica.app.gds.get_gds_uri" href="#libica.app.gds.get_gds_uri">get_gds_uri</a></code></li>
<li><code><a title="libica.app.gds.parse_path" href="#libica.app.gds.parse_path">parse_path</a></code></li>
<li><code><a title="libica.app.gds.presign_gds_file" href="#libica.app.gds.presign_gds_file">presign_gds_file</a></code></li>
<li><code><a title="libica.app.gds.presign_gds_file_with_override" href="#libica.app.gds.presign_gds_file_with_override">presign_gds_file_with_override</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
